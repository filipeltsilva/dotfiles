#!/bin/bash

function goHome() {
    cd ~
}

function rest() {
    echo
    sleep 2
}

function chooseOption() {
    printOptions

    read -p 'ESCOLHA UMA DAS OPÇÕES ACIMA: ' OPTION
    echo

    case $OPTION in
    0)
        clear
        exit
        ;;
    1)
        vimSetup
        chooseOption
        ;;
    2)
        zshSetup
        chooseOption
        ;;
    3)
        gitSetup
        chooseOption
        ;;
    *)
        echo 'OPÇÃO INVÁLIDA! SELECIONE UMA DAS OPÇÕES LISTADAS.'
        rest
        chooseOption
        ;;
    esac
}

function printOptions() {
    echo
    echo '1) VIM'
    echo '2) ZSH'
    echo '3) GIT'
    echo
    echo '0) ENCERRAR'
    echo	
}

function gitSetup() {
    echo '#############################'
    echo '#### CONFIGURAÇÃO DO GIT ####'
    echo '#############################'
    rest
    
    if [ -f ~/.gitconfig ]; then
        echo 'O ARQUIVO .gitconfig JÁ ESTÁ CONFIGURADO NESSE SISTEMA.'
    else
        echo 'CONFIGURANDO O ARQUIVO .gitconfig'
        ln -s ~/.dotfiles/git/gitconfig ~/.gitconfig
    fi
}

function vimSetup(){
    echo '################'
    echo '# SETUP DO VIM #'
    echo '################'
    rest

    if [ -f ~/.vimrc ]; then
        echo 'O ARQUIVO .vimrc JÁ ESTÁ CONFIGURADO NESSE SISTEMA.'
    else    
        echo 'CONFIGURANDO O ARQUIVO .vimrc'
        ln -s ~/.dotfiles/vim/vimrc ~/.vimrc
    fi

    echo 'VERIFICANDO SE O GERENCIADOR DE PLUGINS VIM-PLUG JÁ ESTÁ INSTALADO.'
    rest
    if [ ! -d ~/.vim/autoload ]; then
        echo 'INSTALANDO O PLUGIN VIM-PLUG'
        curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
        https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
    else
        echo 'O PLUGIN VIM-PLUG JÁ ESTÁ INSTALADO E CONFIGURADO NESSE SISTEMA.'
    fi
}

function zshSetup() {
    echo '#######################'
    echo '# CONFIGURAÇÃO DO ZSH #'
    echo '#######################'
    rest

    if [ -f ~/.zshrc  ] && [ -L ~/.zshrc ]; then
        echo 'O ARQUIVO .zshrc JÁ ESTÁ CONFIGURADO NESSE SISTEMA.'
    elif [ -f ~/.zshrc ] && [ ! -L ~/.zshrc ]; then
        echo 'REMOVENDO O .zshrc PADRÃO E CONFIGURANDO O NOVO ARQUIVO .zshrc'
        rm ~/.zshrc
        ln -s ~/.dotfiles/zsh/zshrc ~/.zshrc
    fi
}

while true;
do
    chooseOption
done
